<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ejemplo de WhatsApp Embed</title>
</head>
<body>

  <h1>Bienvenido a mi página</h1>
  <p>Este es un ejemplo de cómo incrustar el botón de WhatsApp.</p>

<!-- Escala embed whatsapp -->
<script id="escala-whatsapp-c1bb993e-0eb4-11f0-b4fc-8a5660fb165c-09569959979486389" data-version="0.1.0">
    window["escala-whatsapp-c1bb993e-0eb4-11f0-b4fc-8a5660fb165c-09569959979486389"] = {
      f: "c1bb993e-0eb4-11f0-b4fc-8a5660fb165c",
      r: "09569959979486389",
      c: "ce8ae5e7-a5a9-11ef-8499-9ff651aeb986",
      l: "es"
    };
  
    (function () {
      function escInitWhatsappImpl(opts) {
        const id = "escala-whatsapp-" + opts.f + "-" + opts.r;
        if (document.getElementById(id + "-loaded")) return;
  
        if (typeof jQuery === "undefined") {
          const jq = document.createElement("script");
          jq.src = "https://code.jquery.com/jquery-3.6.0.min.js";
          jq.type = "text/javascript";
          jq.onload = () => escInitWhatsappImpl(opts);
          document.head.appendChild(jq);
          return;
        }
  
        const preload = document.createElement("script");
        preload.type = "text/javascript";
        preload.innerHTML = `
          window.funnelPuppeteer = window.funnelPuppeteer || {};
          window.funnelPuppeteer.customerId = "${opts.c}";
        `;
        document.head.appendChild(preload);
  
        const div = document.createElement("div");
        div.id = "escalaWhatsappButton";
        div.setAttribute("data-position", "right");
        div.setAttribute("data-phone", "+51 959604475");
        div.setAttribute("data-title", "Empresa");
        div.setAttribute("data-message", "Hola, este es su mensaje de su buen amigo el hombre araña sorprendente");
        div.setAttribute("data-button", "Conversar");
        div.setAttribute("data-auto-open-timeout", "0");
        div.setAttribute("data-closable", "true");
  
        const rawPlaceholders = `data-contact_first_name-placeholder="Nombre"
data-contact_email-placeholder="Email"
data-contact_phone_number-placeholder="Teléfono primario"`;
        rawPlaceholders.split('\n').forEach(p => {
          const parts = p.trim().split('=');
          if (parts.length >= 2) {
            const key = parts[0];
            const value = parts.slice(1).join('=');
            if (key && value) div.setAttribute(key, value.replace(/['"]/g, ''));
          }
        });
  
        const script1 = document.createElement("script");
        script1.src = "https://landing.dev.exitoweb.com/plugins/whatsapp/whatsapp.js";
        script1.type = "text/javascript";
  
        const script2 = document.createElement("script");
        script2.src = "https://landing.dev.exitoweb.com/puppeteer/fpuppeteer.js";
        script2.type = "text/javascript";
  
        const marker = document.createElement("div");
        marker.id = id + "-loaded";
  
        document.body.appendChild(div);
        document.body.appendChild(script1);
        document.body.appendChild(script2);
        document.body.appendChild(marker);
      }
  
      function escInitWhatsapp() {
        const opts = window["escala-whatsapp-c1bb993e-0eb4-11f0-b4fc-8a5660fb165c-09569959979486389"];
        if (!opts) return;
        escInitWhatsappImpl(opts);
      }
  
      if (document.readyState === "complete" || document.readyState === "interactive") {
        setTimeout(escInitWhatsapp, 1);
      } else if (window.addEventListener) {
        window.addEventListener("load", escInitWhatsapp, false);
      } else if (window.attachEvent) {
        window.attachEvent("onload", escInitWhatsapp);
      } else {
        window.onload = escInitWhatsapp;
      }
    })();
  </script>
  <!-- Escala embed whatsapp -->

</body>
</html>
